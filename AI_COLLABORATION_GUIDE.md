# 情侣微信小程序 - AI 协作开发指南

## 🎯 概述

本文档定义了使用多个 AI Skills 协作开发情侣小程序的完整工作流。每个 Skill 扮演特定角色，相互监督确保代码质量。

---

## 👥 AI 角色与职责

### 1. 📋 PM Agent (项目经理)
**Skill:** `multi-agent-pm` (如未配置，可用当前 Agent 替代)
- 拆分任务为具体可执行项
- 协调各 Agent 工作
- 验收交付成果
- 报告进度

### 2. 🎨 UI/UX 设计师
**Skill:** `ui-ux-design`
- 负责界面设计
- 遵循 Apple 风格设计规范
- 确保响应式布局
- 动画效果设计
- 色彩与字体规范

### 3. 🔐 安全审计员
**Skill:** `security-auditor`
- 审查代码安全漏洞
- 检查数据泄露风险
- 验证用户隐私保护
- 检查云函数安全配置

### 4. 🧪 测试工程师
**Skill:** `testing-patterns` + `e2e-testing-patterns`
- 编写单元测试
- 编写集成测试
- 端到端测试用例
- 确保无明显 bug

### 5. 🔍 代码审查员
**Skill:** `code-review`
- 审查代码质量
- 检查代码规范
- 性能优化建议
- 可维护性评估

---

## 🔄 开发工作流

```
用户需求
    ↓
┌─────────────────────────────────────┐
│  PM Agent - 任务拆分与规划           │
│  (生成 SPEC.md)                     │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│  UI/UX Design - 界面设计            │
│  (生成设计稿 + 样式规范)            │
└─────────────────────────────────────┘
    ↓
┌─────────────────────────────────────┐
│  Dev Agent - 代码实现                │
│  (实现功能代码)                     │
└─────────────────────────────────────┘
    ↓
    ├──────────────────┬──────────────┤
    ↓                  ↓              ↓
┌─────────┐    ┌───────────┐   ┌──────────┐
│Security │    │ Code      │   │ Testing  │
│Auditor  │    │ Reviewer  │   │ Engineer │
│安全审查  │    │ 代码审查   │   │ 测试验证 │
└─────────┘    └───────────┘   └──────────┘
    ↓          ↓              ↓
    └──────────┴──────────────┘
               ↓
    ┌─────────────────────┐
    │ PM Agent - 验收     │
    │ (最终验收与合并)    │
    └─────────────────────┘
```

---

## 📝 每次迭代的检查清单

### UI/UX Design 检查项
- [ ] 遵循 Apple 浅色主题设计
- [ ] 响应式布局适配
- [ ] 动画流畅自然
- [ ] 色彩对比度符合 WCAG
- [ ] 字体层级清晰

### Security Auditor 检查项
- [ ] 无敏感数据泄露
- [ ] 用户权限正确验证
- [ ] 云函数调用安全
- [ ] 数据库访问控制
- [ ] 无 XSS/注入风险

### Testing Engineer 检查项
- [ ] 核心功能有测试覆盖
- [ ] 边界条件已测试
- [ ] 错误处理已测试
- [ ] 用户流程端到端验证

### Code Reviewer 检查项
- [ ] 代码规范符合 ESLint
- [ ] 无重复代码
- [ ] 函数短小单一职责
- [ ] 变量命名语义清晰
- [ ] 注释清晰到位

---

## 🎯 开发任务模板

### 任务描述
```
## 功能：[功能名称]

### 描述
[功能简要描述]

### 验收标准
- [ ] 标准 1
- [ ] 标准 2
- [ ] 标准 3

### 涉及页面
- page1
- page2

### 数据结构
```json
{
  "field": "type"
}
```
```

---

## 🛠️ 技术栈

- **前端:** 微信小程序 (WXML, WXSS, JS/TS)
- **后端:** 微信云开发 (云函数, 云数据库, 云存储)
- **数据库:** MongoDB (云开发)

---

## 📊 数据库设计原则

1. **用户分离** - 通过 `_openid` 区分用户
2. **关系简洁** - 避免复杂关联
3. **索引优化** - 常用查询字段建索引
4. **权限控制** - 云数据库权限规则

---

## 🚀 快速开始

1. 阅读现有代码结构
2. 选择要开发的功能
3. 按照工作流执行
4. 每个阶段使用对应 Skill 审查

---

## 📞 需要开发的功能列表

按优先级排序：

| 优先级 | 功能 | 描述 |
|--------|------|------|
| P0 | 🖼️ 共享相册 | 情侣双方上传/查看照片 |
| P1 | 💬 留言板 | 两人互发消息 |
| P1 | 📅 纪念日 | 重要日期倒数 |
| P2 | 📝 共同待办 | 一起完成的待办 |
| P2 | 🎮 小游戏 | 双人互动游戏 |
| P3 | 💕 亲密度 | 互动等级系统 |
| P3 | 📊 统计 | 互动数据报告 |

