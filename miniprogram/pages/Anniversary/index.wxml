<!--miniprogram/pages/Anniversary/index.wxml-->
<view class="anniversary-container">
  <!-- é¡¶éƒ¨å€’è®¡æ—¶ -->
  <view class="countdown-section">
    <view class="countdown-card {{nextAnniversary.isToday ? 'today' : ''}}">
      <view class="countdown-label">è·ç¦»ä¸‹ä¸€ä¸ªçºªå¿µæ—¥</view>
      <view class="countdown-days">
        <text class="days-number">{{daysRemaining}}</text>
        <text class="days-unit">å¤©</text>
      </view>
      <view class="countdown-name" wx:if="{{nextAnniversary}}">
        {{getTypeIcon(nextAnniversary.type)}} {{nextAnniversary.name}}
      </view>
      <view class="countdown-date" wx:if="{{nextAnniversary}}">
        {{nextAnniversary.nextDate}}
      </view>
    </view>
  </view>

  <!-- çºªå¿µæ—¥åˆ—è¡¨ -->
  <view class="list-section">
    <view class="section-title">ğŸ“… çºªå¿µæ—¥åˆ—è¡¨</view>
    
    <view class="anniversary-list">
      <view 
        class="anniversary-item {{item.isToday ? 'today' : ''}}"
        wx:for="{{anniversaries}}"
        wx:key="_id"
      >
        <view class="item-icon">{{getTypeIcon(item.type)}}</view>
        <view class="item-info">
          <view class="item-name">{{item.name}}</view>
          <view class="item-date">{{item.date}}</view>
        </view>
        <view class="item-countdown">
          <text class="countdown-value">{{item.daysRemaining}}</text>
          <text class="countdown-unit">å¤©</text>
        </view>
        <view class="item-delete" bindtap="deleteAnniversary" data-id="{{item._id}}">
          <text>Ã—</text>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{anniversaries.length === 0 && !loading}}">
        <text class="empty-icon">ğŸ“…</text>
        <text class="empty-text">è¿˜æ²¡æœ‰çºªå¿µæ—¥</text>
        <text class="empty-hint">ç‚¹å‡»å³ä¸‹è§’æ·»åŠ ç¬¬ä¸€ä¸ªçºªå¿µæ—¥</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
  </view>

  <!-- æ‚¬æµ®æŒ‰é’® -->
  <view class="fab" bindtap="goToAdd">
    <text class="fab-icon">+</text>
  </view>
</view>
