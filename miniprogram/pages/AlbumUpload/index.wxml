<!--miniprogram/pages/AlbumUpload/index.wxml-->
<view class="upload-container">
  <!-- 照片选择区域 -->
  <view class="image-grid">
    <view 
      class="image-item" 
      wx:for="{{selectedImages}}" 
      wx:key="index"
    >
      <image class="preview-image" src="{{item.path}}" mode="aspectFill"></image>
      <view class="remove-btn" bindtap="removeImage" data-index="{{index}}">
        <text>×</text>
      </view>
    </view>
    
    <!-- 添加按钮 -->
    <view 
      class="add-btn" 
      bindtap="chooseImage" 
      wx:if="{{selectedImages.length < maxImages}}"
    >
      <text class="add-icon">+</text>
      <text class="add-text">添加照片</text>
    </view>
  </view>

  <!-- 描述输入 -->
  <view class="content-section">
    <textarea 
      class="content-input" 
      placeholder="添加描述..." 
      value="{{content}}"
      bindinput="onContentInput"
      maxlength="200"
    ></textarea>
    <text class="content-count">{{content.length}}/200</text>
  </view>

  <!-- 提示 -->
  <view class="tips">
    <text>• 最多上传 {{maxImages}} 张照片</text>
    <text>• 支持 JPG、PNG 格式</text>
  </view>

  <!-- 上传按钮 -->
  <view class="submit-section">
    <button 
      class="submit-btn" 
      bindtap="uploadImages" 
      disabled="{{uploading || selectedImages.length === 0}}"
    >
      <view wx:if="{{uploading}}">
        <text>上传中 {{uploadProgress}}%</text>
      </view>
      <view wx:else>
        <text>上传到相册</text>
      </view>
    </button>
  </view>
</view>
