<!--miniprogram/pages/AlbumDetail/index.wxml-->
<view class="detail-container">
  <!-- ç…§ç‰‡åŒºåŸŸ -->
  <view class="image-section">
    <image 
      class="detail-image" 
      src="{{album.imageUrl}}" 
      mode="aspectFit"
      bindtap="previewImage"
    ></image>
  </view>

  <!-- æ“ä½œæ  -->
  <view class="action-bar">
    <view class="action-item" bindtap="toggleLike">
      <text class="action-icon {{liked ? 'liked' : ''}}">{{liked ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      <text class="action-text">{{album.likeCount || 0}}</text>
    </view>
    <view class="action-item" bindtap="showCommentBox">
      <text class="action-icon">ğŸ’¬</text>
      <text class="action-text">{{album.commentCount || 0}}</text>
    </view>
    <view class="action-item" bindtap="setAsCover">
      <text class="action-icon">ğŸ–¼ï¸</text>
      <text class="action-text">å°é¢</text>
    </view>
    <view class="action-item" wx:if="{{isUploader}}" bindtap="deletePhoto">
      <text class="action-icon delete">ğŸ—‘ï¸</text>
      <text class="action-text delete">åˆ é™¤</text>
    </view>
  </view>

  <!-- ç…§ç‰‡ä¿¡æ¯ -->
  <view class="info-section">
    <view class="uploader-info">
      <text class="uploader-name">{{album.uploader}}</text>
      <text class="upload-time">{{album.createTime}}</text>
    </view>
    <view class="content" wx:if="{{album.content}}">
      {{album.content}}
    </view>
  </view>

  <!-- è¯„è®ºåŒºåŸŸ -->
  <view class="comment-section">
    <view class="section-title">è¯„è®º</view>
    <view class="comment-list" wx:if="{{comments.length > 0}}">
      <view class="comment-item" wx:for="{{comments}}" wx:key="_id">
        <view class="comment-header">
          <text class="commenter-name">{{item.commenter}}</text>
          <text class="comment-time">{{item.createTime}}</text>
        </view>
        <view class="comment-content">{{item.content}}</view>
      </view>
    </view>
    <view class="no-comment" wx:else>
      <text>è¿˜æ²¡æœ‰è¯„è®ºï¼Œå¿«æ¥æŠ¢æ²™å‘å§~</text>
    </view>
  </view>

  <!-- è¯„è®ºè¾“å…¥æ¡† -->
  <view class="comment-input-box {{showCommentInput ? 'show' : ''}}">
    <input 
      class="comment-input" 
      placeholder="è¯´ç‚¹ä»€ä¹ˆ..." 
      value="{{commentText}}"
      bindinput="onCommentInput"
      focus="{{showCommentInput}}"
    />
    <view class="send-btn" bindtap="submitComment">å‘é€</view>
  </view>
</view>
